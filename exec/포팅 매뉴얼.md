# í¬íŒ… ë§¤ë‰´ì–¼

## ğŸŒŸ ì£¼ìš” ê¸°ëŠ¥

- í—¬ìŠ¤ì¸ê³¼ íŠ¸ë ˆì´ë„ˆì˜ PT ê´€ë¦¬ ì„œë¹„ìŠ¤
- ì‹ë‹¨, ìš´ë™, PT ì¼ì •, ì¸ë°”ë”” ê²€ì‚¬ì§€ ë“± **PTì— í•„ìš”í•œ ì •ë³´ ê´€ë¦¬**
- AIë¥¼ ì´ìš©í•œ ë™ì˜ìƒ ìì„¸ í”¼ë“œë°±
- webRTCë¥¼ í†µí•œ ì‹¤ì‹œê°„ ìì„¸ í”¼ë“œë°±

## ğŸ’» ê°œë°œ í™˜ê²½

### Backend

| IDE | IntelliJ Ultimate 2024.1 |
| --- | --- |
| Language | java temurin 17.0.11 |
| Framework | Spring Boot 3.3.2, Spring Security, Spring JPA, Lombok |

### Frontend

| IDE | Visual Studio Code |
| --- | --- |
| Language | JavaScript(ES6+), TypeScript |
| Framework  | React, Vite |
| Library  | zustand4.5.4, firebase 10.12.5, date-fns3.6.0, qrcode.react  3.1.0 |
| Library - UI ì»´í¬ë„ŒíŠ¸ | react-icons 5.2.1, react-modal 3.16.1, 
react-datepicker 7.3.0, recharts 2.12.7, 
styled-components 6.1.12, tailwindcss 3.4.6 |
| Library - ë¼ìš°íŒ… | react-router-dom 6.25.1 |
| Library -ë„¤íŠ¸ì›Œí‚¹ | axios 1.7.2, sockjs-client1.6.1, stompjs2.3.3, websocket 1.0.35 |
| bulid,Bundling | vite 5.4.0, vite-plugin-pwa 0.20.1 |

### Database

- MySQL 8.0.37
- Redis 7.4.0

### Web RTC

- openvidu 3.0.0

### AI

| IDE | PyCharm Professional 2024.1.4 |
| --- | --- |
| Language | Python 3.12.3 |
| Framework, Library | Flask 3.0.3, Werkzeug 3.0.3, Streamlit, OpenCV 4.10.0.84, Mediapipe 0.10.14, Numpy 2.0.1 |

### CI/CD

- AWS EC2
- Docker
- Caddy
- Jenkins

### í˜‘ì—… íˆ´

- GitLab
- Notion
- Mattermost
- Discord

### ê¸°íƒ€ í¸ì˜ íˆ´

- postman
- ERD Cloud

## ğŸŒ ë°°í¬ ì„¤ì •

### Git Labê³¼ Jenkinsë¥¼ ì´ìš©í•œ CI/CD êµ¬ì¶•

- gitlab
    
    ![image.png](./image/image.png)
    
- jenkins
    - ì ‘ê·¼ url : http://i11c203.p.ssafy.io:8080
    - ì•„ì´ë””: EggInHealth
    - ë¹„ë¹Œë²ˆí˜¸: egginhealthssafy0722
- Backend & frontend
    - ì  í‚¨ìŠ¤ì™€  gitlab ë ˆí¬ì§€í† ë¦¬ ì—°ê²°
    
    ![image.png](./image/image_1.png)
    
    - ë¹Œë“œ ì´ë²¤íŠ¸ë¥¼ ë“±ë¡
    
    ![image.png](./image/image_2.png)
    
    - ë¹Œë“œ ì„¤ì •
        
        ![image.png](./image/image_3.png)
        
        ![image.png](./image/image_4.png)
        
        ![image.png](./image/image_5.png)
        
        - compose í™˜ê²½ë³€ìˆ˜ ê°’ ì„¤ì •
        - ì  í‚¨ìŠ¤ ì»¨í…Œì´ë„ˆ ì—ì„œ ë¹Œë“œ í›„ docker-compose íŒŒì¼ ì‹¤í–‰
        - ì  í‚¨ìŠ¤ ì»¨í…Œì´ë„ˆì—ì„œ ë„ì»¤ ë°ëª¬ì— ëª…ë ¹ì–´ë¥¼ ì „ë‹¬í•´ ì  í‚¨ìŠ¤ ì»¨í…Œì´ë„ˆ ë°–ì—ì„œ ë„ì»¤ ì»¨í…Œì´ë„ˆê°€ ë§Œë“¤ì–´ì§€ê²Œí•¨

- caddy ì„¤ì •
    - caddy2 Letsâ€™s Encryptì—ì„œ SSL/TLS ìë™ ì¸ì¦ì„œ ë°œê¸‰
    - í”„ë¡ì‹œ ì„¤ì •
        - í”„ë¡ íŠ¸ì—”ë“œ ê²½ë¡œ:  /
        - ë°±ì—”ë“œ ê²½ë¡œ : /api
        - AI ê²½ë¡œ: /ai
    
    ![image.png](./image/image_6.png)
    
    ![image.png](./image/image_7.png)
    

## âš“ EC2 í¬íŠ¸ ì •ë¦¬

| PORT | ì´ë¦„ |
| --- | --- |
| 80 | http-https ë¡œ í”„ë¡ íŠ¸ í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸  |
| 8081 | Jenkins Docker Container |
| 3306 | MySQL Docker Container |
| 5500 | AI Docker Container |
| 5173 | React Docker Container |
| 7880 | Caddy Docker Container |
| 8000 | SpringBoot Docker Container |
| 6379 | Redis Docker Container |
| 7000 | OpenVidu Redis Docker Container |
| 20000 | OpenVidu MongoDB Docker Container |
| 3000 | OpenVidu Grafana Docker Container |
| 9101 | OpenVidu Minio-Console Docker Container |
| 5000 | OpenVidu Dashboard Docker Container |
| 8080 | OpenVidu LiveKit Docker Container |
| 608 | OpenVidu  |

## ğŸ’¡í”„ë¡œì íŠ¸ EC2 ì¸í”„ë¼ êµ¬ì¡°

![undefined (2).png](./image/undefined_(2).png)

- Backend
    - ì  í‚¨ìŠ¤ ì—ì„œ ë¹Œë“œ í›„ ê¸°ì¡´ì— ì¡´ì¬í•˜ë˜ ë°±ì—”ë“œ ë„ì»¤ ì»¨í…Œì´ë„ˆë¥¼ ì¤‘ë‹¨ í›„ ì‚­ì œí•œë‹¤.
    - docker compose ëª…ë ¹ë¬¸ì„ ì‹¤í–‰í•œë‹¤.
        
        ![image.png](./image/image_8.png)
    - ë°±ì—”ë“œ ì„œë²„ ë„ì»¤ íŒŒì¼
        
        ![image.png](./image/image_9.png)
        
    - application.yml
        
        ```yaml
        spring:
          config:
            import: optional:file:.env[.properties]
        
          datasource:
            driver-class-name: com.mysql.cj.jdbc.Driver
            url: ${MYSQL_URL}
            username: ${MYSQL_USERNAME}
            password: ${MYSQL_PASSWORD}
          jpa:
            database: mysql
            database-platform: org.hibernate.dialect.MySQLDialect
            show-sql: true
            hibernate:
              ddl-auto: update
            properties:
              hibernate:
                format_sql: true
          data:
            redis:
              host: ${REDIS_HOST}
              port: ${REDIS_PORT}
              password: ${REDIS_PASSWORD}
          security:
            oauth2:
              client:
                registration:
                  naver:
                    client-name: naver
                    client-id: ${NAVER_CLIENT_ID}
                    client-secret: ${NAVER_CLIENT_SECRET}
                    redirect-uri: ${NAVER_REDIRECT_URI}
                    authorization-grant-type: authorization_code
                    scope: name, email, profile_image
                provider:
                  naver:
                    authorization-uri: https://nid.naver.com/oauth2.0/authorize
                    token-uri: https://nid.naver.com/oauth2.0/token
                    user-info-uri: https://openapi.naver.com/v1/nid/me
                    user-name-attribute: response
        
          cloud:
            aws:
              s3:
                bucket: ${S3_BUCKET_NAME}
                stack.auto: false
                region.static: ap-northeast-2
                credentials:
                  accessKey: ${S3_ACCESS_KEY}
                  secretKey: ${S3_SECRET_ACCESS_KEY}
        
          error:
            printStackTrace: true
        
          servlet:
            multipart:
              max-file-size: 10MB
        
        server:
          port: ${SERVER_PORT}
          forward-headers-strategy: framework
          tomcat:
            remoteip:
              host-header: X-Forwarded-Host
              port-header: X-Forwarded-Port
              protocol-header: X-Forwarded-Proto
              remote-ip-header: X-Forwarded-For
            use-relative-redirects: true
        
        # LiveKit configuration
        livekit:
          api:
            key: ${LIVEKIT_API_KEY}
            secret: ${LIVEKIT_API_SECRET}
        
        ```
        
- Frontend
    - ì  í‚¨ìŠ¤ ì—ì„œ ë¹Œë“œ í›„ ê¸°ì¡´ì— ì¡´ì¬í•˜ë˜ í”„ë¡ íŠ¸ ë„ì»¤ ì»¨í…Œì´ë„ˆë¥¼ ì¤‘ë‹¨ í›„ ì‚­ì œí•œë‹¤.
    - í”„ë¡ íŠ¸ íŒŒì¼ ë¹Œë“œ í›„  npm serve íŒ¨í‚¤ì§€ë¥¼ ì´ìš©í•´ ì •ì í˜ì´ì§€ë¥¼ ë°˜í™˜í•œë‹¤.
    - í”„ë¡ íŠ¸ ë„ì»¤ íŒŒì¼
        
        ![image.png](./image/image_10.png)
        
- AI
    - ë„ì»¤ íŒŒì¼ë¡œ ì´ë¯¸ì§€ ë§Œë“  í›„ ì»¨í…Œì´ë„ˆë¡œ ì‹¤í–‰
    
    ![image.png](./image/image_11.png)
    
- OpenVidu server
    - ì•„ë˜ ëª…ë ¹ì–´ë¥¼ í†µí•´ Openvidu ê´€ë ¨ëœ íŒŒì¼ ë‹¤ìš´ í›„ ì‹¤í–‰í•¨
    
    ```yaml
    sh <(curl -fsSL http://get.openvidu.io/community/singlenode/latest/install.sh)
    ```
    
- ReverseProxy
    - OpenViduì™€ í•¨ê»˜ ì‚¬ìš©í•˜ëŠ” Caddyë¥¼ í™œìš©í•´ SSL ì¸ì¦ì„œë¥¼ ì ìš©í•˜ê³  í”„ë¡ íŠ¸,ë°±,AI ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ ì¶”ê°€ ì„¤ì •í•¨

## ğŸ’¾ DB ì„¤ì •

### MySQL

- username : eggs
- password : egggginhell0730
- db erd
    
    ![egg-in-health (1).png](./image/egg-in-health_(1).png)
    

### Redis

- password : budodok

## ğŸ“ƒ ì™¸ë¶€ ì„œë¹„ìŠ¤ ë¬¸ì„œ

### ì†Œì…œ ë¡œê·¸ì¸

- ë„¤ì´ë²„
    - [https://developers.naver.com/products/login/api/api.md](https://developers.naver.com/products/login/api/api.md)

### OCR API

- í´ë¡œë°”
    - [https://guide.ncloud-docs.com/docs/clovaocr-overview](https://guide.ncloud-docs.com/docs/clovaocr-overview)

### FCM

- firebase
    - [https://firebase.google.com/docs/cloud-messaging/concept-options?hl=ko](https://firebase.google.com/docs/cloud-messaging/concept-options?hl=ko)